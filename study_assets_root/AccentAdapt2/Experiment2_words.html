
<!DOCTYPE html>
<html>
  <head>
    <title>English word identidication Study - Minimal Pairs</title>
    <script src="https://unpkg.com/jspsych@7.3.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-button-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-instructions@1.1.1"></script>
    <script src = "https://unpkg.com@jspsych/jsPsych.randomization.factorial(factors, repetitions, unpack)"></script>
    <script src = "https://unpkg.com@jspsych/jsPsych.randomization.sampleWithoutReplacement"></script>
    <script src = "https://unpkg.com/@jspsych/plugin-survey@0.2.1"></script>
    <script src = "https://unpkg.com/@jspsych/plugin-survey-html-form@1.0.2"></script>
    <script src ="https://unpkg.com/@jspsych/plugin-survey-text"></script>
    <script src ="https://unpkg.com/@jspsych/plugin-html-slider-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-select@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice"></script>
    <script src="jatos.js"></script>
    <link href="https://unpkg.com/jspsych@7.3.2/css/jspsych.css" rel="stylesheet" type="text/css" />
  <style>
  </style>
  </head>
  <body> </body>
  <script>

    //initialize jsPsych 
      var jsPsych = initJsPsych({
        experiment_width: 600,
        on_close: () => jatos.endStudy(jsPsych.data.get().csv(), "closed early"),
        on_finish: () => jatos.endStudy(jsPsych.data.get().csv())
      });

    //create timeline 
      var timeline = [];
      
    //This is the welcome message at the start of the experiment. The participant can press any key to continue
    var welcome = {
      type: jsPsychInstructions,
      pages: ['Welcome to our English word identification task. This study will take approximately 45 minutes to complete. Please do not press back or refresh because the experiment will be terminated. Press continue if you would like to proceed with the consent form.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
    timeline.push(welcome);

 /* consent form */
 var consent = {
   type: jsPsychSurvey,
   button_label_finish: "Continue",
   pages: [
    [
    { 
        type: 'html',
        prompt: '<p><strong>Consent Form (1/3)</p><p>English word identification task, Study #30001771</p>'
      },
      { 
        type: 'html',
        prompt: '<p><strong>Who is conducting this study?</strong></p><p>Principal investigator: Dr. Henny Yeung, student lead: Xizi Deng, SFU Department of Linguistics, xizid@sfu.ca.Research personnel: Xizi Deng the Language Learning and Development Lab (SFU Department of Linguistics)</p>'
      },
      {
        type: 'html',
        prompt: '<p><strong>Why are we doing this study?</strong></p><p>This project examines how English words are perceived by native English listeners</p>'
      },
      {
        type: 'html',
        prompt: '<p><strong>Your participation is voluntary.</strong></p><p>Your participation is voluntary. You have the right to refuse to participate in this study. If you decide to participate, you may still choose to withdraw from the study without reason and without negative consequences to the education, employment, or other services to which you are entitled or are presently receiving. You may withdraw your data any time until the results of the study have been published.</p>'
      },
      {
      type: 'html',
        prompt: '<p><strong>What happens in this study?</strong></p><p> If you choose to participate in this study, you will receive a link to an online study hosted in JATOS. You will hear seires of audio clips, each containing an English word. For each audio clip, you will need to decide which word out of the two options on the screen is the one you hear in the audio clip. You will click on the word on the screen to indicate your decision. You will then be asked to fill out a questionnaire on the computer about your language background. The study will take about 40 minutes.</p>'
      },
      {
      type: 'html',
       prompt:'<p><strong>Are there any risks associated with this study?</strong></p><p>We do not think there is anything in this study that could harm you or be bad for you.</p>'
      },
      {
          type: 'html',
        prompt:'<p><strong>Are there any benefits associated with this study?</strong></p><p>We do not think taking part in this study will help you. However, the results of this study may inform how we understand language.</p>'
      },
      {
          type: 'html',
        prompt:'<p><b>Will you be paid for taking part in this research study?</b></p><p>You will receive monetary compensation for your participation, the amount of which is determined by Prolific. Alternatively, if you are taking any undergraduate Linguistics courses at SFU, you will receive two (2) credits in the SFU Department of Linguistics RPS system.</p>'
      },
      {
          type: 'html',
        prompt:'<p><b>How will your privacy be maintained?</b></p><p>Your confidentiality will be respected. If you participate through JATOS, your name will never appear alongside the data. The data we collect will be stored on a password protected server located in Canada. Your Prolific ID number will be linked to your unique code only in a single master file stored on a password-protected server. Your data and the master file will be stored separately on that server and will only be accessible by the PI and student lead. Your identifying information will never appear in any reports of the completed study. In current best practices in research, electronic data is to be preserved for future use in open access initiatives, which allow researchers from different universities to share their data in an effort to stimulate further use and exploration of existing datasets. Data from this study may be uploaded to an online repository; these files will be stripped of any information that could identify participants, to ensure confidentiality.</p>'
      },
      {
          type: 'html',
        prompt:'<p><b>How long will we keep your data?</b></p><p>Because this is the first in a series of studies, we will keep your data indefinitely and will be destroyed if the study is not published. Your data will be maintained on a password-protected server in Canada; only the PI and student lead will have access to the data. Passwords are changed regularly. The master file with identifiable information will be deleted after 7 years.</p>'
      },
      {
          type: 'html',
        prompt: '<p><b>What will happen with the results of this study?</b></p><p>The results of this study will be published in academic journal articles and/or presented at academic conferences. If you are interested in the results of the study, you may contact the student lead (Xizi Deng, xizid@sfu.ca) for results when they become available.</p>'
      },
      {
          type: 'html',
        prompt:'<p><b>Who can you contact if you have complaints or concerns about the study?</b></p><p>If you have any concerns about your rights as a research participant and/or your experience while participating in this study, please contact the Director, SFU Office of Research Ethics at dore@sfu.ca or 778-782-6593.'
       },
    ],
    [
    { 
        type: 'html',
        prompt: '<p><strong>Consent Form (2/3)</p><p>English word identification, Study #30001771</p>'
      },
    {
            type: 'html',
        prompt:'<p><b>Future use of your data.</b></p><p>Your data may be published in research articles in the future. Data from this study may be uploaded to an online repository and these files will be stripped of any information that could identify participants (e.g., names, email addresses), to ensure confidentiality. Please indicate whether you consent for your de-identified research data to be kept for use in future research. </p>'
       },
       {
        type: 'multi-choice',
        prompt: ' ',
        options: ['yes', 'no'],
        required: true,
        name: "Future Use of Data"
       },

       {
          type: 'html',
        prompt:'<p><b>Future contact.</b></p><p>The SFU Department of Linguistics may want to contact you in the future to invite you to participate in other studies. Please indicate whether we may contact you again in the future.</p>'
       },
       {
        type: 'multi-choice',
        prompt: ' ',
        options: ['yes', 'no'],
        required: true,
        name: "Future Contact"
       },
    ],
    [
    { 
        type: 'html',
        prompt: '<p><strong>Consent Form (3/3)</p><p>English word identification, Study #30001771</p>'
      },
      {
        type: 'html',
        prompt: '<p><b>How do I provide my consent to participate?</b></p><p>Taking part in this study is entirely up to you. You have the right to refuse to participate in this study. If you decide to take part, you may choose to withdraw at any time without giving a reason and without any negative consequences to the education, employment, or other services to which you are entitled or are presently receiving.</p>'
    },
    {
        type: 'html',
        prompt: 'Select an option below to indicate your consent. If you select “do not consent,” you will be directed to close your browser. If you wish to withdraw your consent at any time, please contact the student lead, Xizi Deng, at xizid@sfu.ca. By consenting, you do not waive any rights to legal recourse in the event of research-related harm.'
    },
    {
      type: 'multi-choice',
       prompt: ' ',
       options: ['yes', 'do not consent'],
      required: true,
      name: "consent"
      },
    ],
  ],
  on_finish: function (data) {
    consent = jsPsych.data.get().values()[1]['response']['consent'] == 'yes';
    if(consent == false){ 
     console.log("Did not consent, ending experiment.");
      jsPsych.endExperiment("Thank you for considering our study. You may now exit your browser and end the experiment");
}
  }
    };
    timeline.push(consent)


    
//This is the instructions page. The participant can press any key to continue
    var instructions= {
      type: jsPsychInstructions,
      pages: [
        'In the current experiment, you will hear a number of short audio clips, each containing one English word. For each audio clip, you will need to decide which word out of the two options on the screen is the one you hear in the audio clip. You will click on the word on the screen to indicate your decision.  The following 3 practice trials will give you examples of how these words sound. Please now seat yourself in a quiet environment, put on your headphones/earphones and press continue if you are ready to begin the practice trials.'
    ],
      button_label_next:"Continue",
      show_clickable_nav: true,
      allow_backward: false,
    };
    timeline.push(instructions);

  //practice trial 1
    var practicetrial1 = {
        type: jsPsychAudioButtonResponse,
        stimulus: 'Audio/Words/PT1_pot.wav',
        choices: ['Thought','Pot'],
        prompt: "What word did you hear? (Practice 1/3)</p>",
        response_allowed_while_playing: false,
        };
  timeline.push(practicetrial1)

//adjusting volume
    var volume = {
        type: jsPsychInstructions,
        pages: ['Great! You have now finished the first practice trial. Please now adjust the sound volume on your computer accordingly if the sound just now was too loud or too quiet. Press continue if you are ready to proceed.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
    timeline.push(volume);

    //practice trial 2
    var practicetrial2 = {
        type: jsPsychAudioButtonResponse,
        stimulus: 'Audio/Words/PT2_pies.wav',
        choices: ['Pies','Thighs'],
        prompt: "What word did you hear? (Practice 2/3)</p>",
        response_allowed_while_playing: false,
        };
    timeline.push(practicetrial2)

    //practice trial 3
    var practicetrial3 = {
        type: jsPsychAudioButtonResponse,
        stimulus: 'Audio/Words/PT3_cops.wav',
        choices: ['Caps','Cops'],
        prompt: "What word did you hear? (Practice 3/3)</p>",
        response_allowed_while_playing: false,
        };
    timeline.push(practicetrial3)

    //transition
    var transition = {
        type: jsPsychInstructions,
        pages: ['Great! The experiment will now begin. Press continue if you are ready to proceed.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
    timeline.push(transition);


   //This preloads all  stimuli so that the trials run smoothly
   var audiolist = ['Audio/Words/ET1_bat1_mono.wav','Audio/Words/ET1_bet1_mono.wav','Audio/Words/ET2_bat1_mono.wav','Audio/Words/ET2_bet1_mono.wav','Audio/Words/ET3_bat1_mono.wav','Audio/Words/ET3_bet1_mono.wav','Audio/Words/MT1_bat1_mono.wav','Audio/Words/MT1_bet1_mono.wav','Audio/Words/MT2_bat1_mono.wav','Audio/Words/MT2_bet1_mono.wav','Audio/Words/MT3_bat1_mono.wav','Audio/Words/MT3_bet1_mono.wav', 'Audio/Words/ET1_bad1_mono.wav','Audio/Words/ET1_bed1_mono.wav','Audio/Words/ET2_bad1_mono.wav','Audio/Words/ET2_bed1_mono.wav','Audio/Words/ET3_bad1_mono.wav','Audio/Words/ET3_bed1_mono.wav','Audio/Words/MT1_bad1_mono.wav','Audio/Words/MT1_bed1_mono.wav','Audio/Words/MT2_bad1_mono.wav','Audio/Words/MT2_bed1_mono.wav','Audio/Words/MT3_bad1_mono.wav','Audio/Words/MT3_bed1_mono.wav','Audio/Words/ET1_pat1_mono.wav','Audio/Words/ET1_pet1_mono.wav','Audio/Words/ET2_pat1_mono.wav','Audio/Words/ET2_pet1_mono.wav','Audio/Words/ET3_pat1_mono.wav','Audio/Words/ET3_pet1_mono.wav','Audio/Words/MT1_pat1_mono.wav','Audio/Words/MT1_pet1_mono.wav','Audio/Words/MT2_pat1_mono.wav','Audio/Words/MT2_pet1_mono.wav','Audio/Words/MT3_pat1_mono.wav','Audio/Words/MT3_pet1_mono.wav','Audio/Words/ET1_pan1_mono.wav','Audio/Words/ET1_pen1_mono.wav','Audio/Words/ET2_pan1_mono.wav','Audio/Words/ET2_pen1_mono.wav','Audio/Words/ET3_pan1_mono.wav','Audio/Words/ET3_pen1_mono.wav','Audio/Words/MT1_pan1_mono.wav','Audio/Words/MT1_pen1_mono.wav','Audio/Words/MT2_pan1_mono.wav','Audio/Words/MT2_pen1_mono.wav','Audio/Words/MT3_pan1_mono.wav','Audio/Words/MT3_pen1_mono.wav','Audio/Words/ET1_fill1_mono.wav','Audio/Words/ET1_feel1_mono.wav','Audio/Words/ET2_fill1_mono.wav','Audio/Words/ET2_feel1_mono.wav','Audio/Words/ET3_fill1_mono.wav','Audio/Words/ET3_feel1_mono.wav','Audio/Words/MT1_fill1_mono.wav','Audio/Words/MT1_feel1_mono.wav','Audio/Words/MT2_fill1_mono.wav','Audio/Words/MT2_feel1_mono.wav','Audio/Words/MT3_fill1_mono.wav','Audio/Words/MT3_feel1_mono.wav','Audio/Words/ET1_ship1_mono.wav','Audio/Words/ET1_sheep1_mono.wav','Audio/Words/ET2_ship1_mono.wav','Audio/Words/ET2_sheep1_mono.wav','Audio/Words/ET3_ship1_mono.wav','Audio/Words/ET3_sheep1_mono.wav','Audio/Words/MT1_ship1_mono.wav','Audio/Words/MT1_sheep1_mono.wav','Audio/Words/MT2_ship1_mono.wav','Audio/Words/MT2_sheep1_mono.wav','Audio/Words/MT3_ship1_mono.wav','Audio/Words/MT3_sheep1_mono.wav','Audio/Words/ET1_pill1_mono.wav','Audio/Words/ET1_peel1_mono.wav','Audio/Words/ET2_pill1_mono.wav','Audio/Words/ET2_peel1_mono.wav','Audio/Words/ET3_pill1_mono.wav','Audio/Words/ET3_peel1_mono.wav','Audio/Words/MT1_pill1_mono.wav','Audio/Words/MT1_peel1_mono.wav','Audio/Words/MT2_pill1_mono.wav','Audio/Words/MT2_peel1_mono.wav','Audio/Words/MT3_pill1_mono.wav','Audio/Words/MT3_peel1_mono.wav','Audio/Words/ET1_will1_mono.wav','Audio/Words/ET1_wheel1_mono.wav','Audio/Words/ET2_will1_mono.wav','Audio/Words/ET2_wheel1_mono.wav','Audio/Words/ET3_will1_mono.wav','Audio/Words/ET3_wheel1_mono.wav','Audio/Words/MT1_will1_mono.wav','Audio/Words/MT1_wheel1_mono.wav','Audio/Words/MT2_will1_mono.wav','Audio/Words/MT2_wheel1_mono.wav','Audio/Words/MT3_will1_mono.wav','Audio/Words/MT3_wheel1_mono.wav','Audio/Words/ET1_think1_mono.wav','Audio/Words/ET1_sink1_mono.wav','Audio/Words/ET2_think1_mono.wav','Audio/Words/ET2_sink1_mono.wav','Audio/Words/ET3_think1_mono.wav','Audio/Words/ET3_sink1_mono.wav','Audio/Words/MT1_think1_mono.wav','Audio/Words/MT1_sink1_mono.wav','Audio/Words/MT2_think1_mono.wav','Audio/Words/MT2_sink1_mono.wav','Audio/Words/MT3_think1_mono.wav','Audio/Words/MT3_sink1_mono.wav','Audio/Words/ET1_thick1_mono.wav','Audio/Words/ET1_sick1_mono.wav','Audio/Words/ET2_thick1_mono.wav','Audio/Words/ET2_sick1_mono.wav','Audio/Words/ET3_thick1_mono.wav','Audio/Words/ET3_sick1_mono.wav','Audio/Words/MT1_thick1_mono.wav','Audio/Words/MT1_sick1_mono.wav','Audio/Words/MT2_thick1_mono.wav','Audio/Words/MT2_sick1_mono.wav','Audio/Words/MT3_thick1_mono.wav','Audio/Words/MT3_sick1_mono.wav','Audio/Words/ET1_faith1_mono.wav','Audio/Words/ET1_face1_mono.wav','Audio/Words/ET2_faith1_mono.wav','Audio/Words/ET2_face1_mono.wav','Audio/Words/ET3_faith1_mono.wav','Audio/Words/ET3_face1_mono.wav','Audio/Words/MT1_faith1_mono.wav','Audio/Words/MT1_face1_mono.wav','Audio/Words/MT2_faith1_mono.wav','Audio/Words/MT2_face1_mono.wav','Audio/Words/MT3_faith1_mono.wav','Audio/Words/MT3_face1_mono.wav','Audio/Words/ET1_mouth1_mono.wav','Audio/Words/ET1_mouse1_mono.wav','Audio/Words/ET2_mouth1_mono.wav','Audio/Words/ET2_mouse1_mono.wav','Audio/Words/ET3_mouth1_mono.wav','Audio/Words/ET3_mouse1_mono.wav','Audio/Words/MT1_mouth1_mono.wav','Audio/Words/MT1_mouse1_mono.wav','Audio/Words/MT2_mouth1_mono.wav','Audio/Words/MT2_mouse1_mono.wav','Audio/Words/MT3_mouth1_mono.wav','Audio/Words/MT3_mouse1_mono.wav','Audio/Words/ET4_cake1_mono.wav', 'Audio/Words/ET4_kick1_mono.wav','Audio/Words/ET5_cake1_mono.wav','Audio/Words/ET5_kick1_mono.wav','Audio/Words/ET6_cake1_mono.wav','Audio/Words/ET6_kick1_mono.wav','Audio/Words/MT4_cake1_mono.wav','Audio/Words/MT4_kick1_mono.wav', 'Audio/Words/MT5_cake1_mono.wav','Audio/Words/MT5_kick1_mono.wav','Audio/Words/MT6_cake1_mono.wav','Audio/Words/MT6_kick1_mono.wav','Audio/Words/ET4_case1_mono.wav','Audio/Words/ET4_kiss1_mono.wav','Audio/Words/ET5_case1_mono.wav','Audio/Words/ET5_kiss1_mono.wav','Audio/Words/ET6_case1_mono.wav','Audio/Words/ET6_kiss1_mono.wav','Audio/Words/MT4_case1_mono.wav','Audio/Words/MT4_kiss1_mono.wav','Audio/Words/MT5_case1_mono.wav','Audio/Words/MT5_kiss1_mono.wav','Audio/Words/MT6_case1_mono.wav','Audio/Words/MT6_kiss1_mono.wav','Audio/Words/ET4_fate1_mono.wav','Audio/Words/ET4_fit1_mono.wav','Audio/Words/ET5_fate1_mono.wav','Audio/Words/ET5_fit1_mono.wav','Audio/Words/ET6_fate1_mono.wav','Audio/Words/ET6_fit1_mono.wav','Audio/Words/MT4_fate1_mono.wav','Audio/Words/MT4_fit1_mono.wav','Audio/Words/MT5_fate1_mono.wav','Audio/Words/MT5_fit1_mono.wav','Audio/Words/MT6_fate1_mono.wav','Audio/Words/MT6_fit1_mono.wav','Audio/Words/ET4_tape1_mono.wav','Audio/Words/ET4_tip1_mono.wav','Audio/Words/ET5_tape1_mono.wav','Audio/Words/ET5_tip1_mono.wav','Audio/Words/ET6_tape1_mono.wav','Audio/Words/ET6_tip1_mono.wav','Audio/Words/MT4_tape1_mono.wav','Audio/Words/MT4_tip1_mono.wav','Audio/Words/MT5_tape1_mono.wav','Audio/Words/MT5_tip1_mono.wav','Audio/Words/MT6_tape1_mono.wav','Audio/Words/MT6_tip1_mono.wav','Audio/Words/ET4_kite1_mono.wav','Audio/Words/ET4_cat1_mono.wav','Audio/Words/ET5_kite1_mono.wav','Audio/Words/ET5_cat1_mono.wav','Audio/Words/ET6_kite1_mono.wav','Audio/Words/ET6_cat1_mono.wav','Audio/Words/MT4_kite1_mono.wav','Audio/Words/MT4_cat1_mono.wav','Audio/Words/MT5_kite1_mono.wav','Audio/Words/MT5_cat1_mono.wav','Audio/Words/MT6_kite1_mono.wav','Audio/Words/MT6_cat1_mono.wav','Audio/Words/ET4_life1_mono.wav','Audio/Words/ET4_laugh1_mono.wav','Audio/Words/ET5_life1_mono.wav','Audio/Words/ET5_laugh1_mono.wav','Audio/Words/ET6_life1_mono.wav','Audio/Words/ET6_laugh1_mono.wav','Audio/Words/MT4_life1_mono.wav','Audio/Words/MT4_laugh1_mono.wav','Audio/Words/MT5_life1_mono.wav','Audio/Words/MT5_laugh1_mono.wav','Audio/Words/MT6_life1_mono.wav','Audio/Words/MT6_laugh1_mono.wav','Audio/Words/ET4_fight1_mono.wav','Audio/Words/ET4_fat1_mono.wav','Audio/Words/ET5_fight1_mono.wav','Audio/Words/ET5_fat1_mono.wav','Audio/Words/ET6_fight1_mono.wav','Audio/Words/ET6_fat1_mono.wav','Audio/Words/MT4_fight1_mono.wav','Audio/Words/MT4_fat1_mono.wav','Audio/Words/MT5_fight1_mono.wav','Audio/Words/MT5_fat1_mono.wav','Audio/Words/MT6_fight1_mono.wav','Audio/Words/MT6_fat1_mono.wav','Audio/Words/ET4_type1_mono.wav','Audio/Words/ET4_tap1_mono.wav','Audio/Words/ET5_type1_mono.wav','Audio/Words/ET5_tap1_mono.wav','Audio/Words/ET6_type1_mono.wav','Audio/Words/ET6_tap1_mono.wav','Audio/Words/MT4_type1_mono.wav','Audio/Words/MT4_tap1_mono.wav','Audio/Words/MT5_type1_mono.wav','Audio/Words/MT5_tap1_mono.wav','Audio/Words/MT6_type1_mono.wav','Audio/Words/MT6_tap1_mono.wav','Audio/Words/ET4_fought1_mono.wav','Audio/Words/ET4_thought1_mono.wav','Audio/Words/ET5_fought1_mono.wav','Audio/Words/ET5_thought1_mono.wav','Audio/Words/ET6_fought1_mono.wav','Audio/Words/ET6_thought1_mono.wav','Audio/Words/MT4_fought1_mono.wav','Audio/Words/MT4_thought1_mono.wav','Audio/Words/MT5_fought1_mono.wav','Audio/Words/MT5_thought1_mono.wav','Audio/Words/MT6_fought1_mono.wav','Audio/Words/MT6_thought1_mono.wav','Audio/Words/ET4_first1_mono.wav','Audio/Words/ET4_thirst1_mono.wav','Audio/Words/ET5_first1_mono.wav','Audio/Words/ET5_thirst1_mono.wav','Audio/Words/ET6_first1_mono.wav','Audio/Words/ET6_thirst1_mono.wav','Audio/Words/MT4_first1_mono.wav','Audio/Words/MT4_thirst1_mono.wav','Audio/Words/MT5_first1_mono.wav','Audio/Words/MT5_thirst1_mono.wav','Audio/Words/MT6_first1_mono.wav','Audio/Words/MT6_thirst1_mono.wav','Audio/Words/ET4_deaf1_mono.wav','Audio/Words/ET4_death1_mono.wav','Audio/Words/ET5_deaf1_mono.wav','Audio/Words/ET5_death1_mono.wav','Audio/Words/ET6_deaf1_mono.wav','Audio/Words/ET6_death1_mono.wav','Audio/Words/MT4_deaf1_mono.wav','Audio/Words/MT4_death1_mono.wav','Audio/Words/MT5_deaf1_mono.wav','Audio/Words/MT5_death1_mono.wav','Audio/Words/MT6_deaf1_mono.wav','Audio/Words/MT6_death1_mono.wav','Audio/Words/ET4_free1_mono.wav','Audio/Words/ET4_three1_mono.wav','Audio/Words/ET5_free1_mono.wav','Audio/Words/ET5_three1_mono.wav','Audio/Words/ET6_free1_mono.wav','Audio/Words/ET6_three1_mono.wav','Audio/Words/MT4_free1_mono.wav','Audio/Words/MT4_three1_mono.wav','Audio/Words/MT5_free1_mono.wav','Audio/Words/MT5_three1_mono.wav','Audio/Words/MT6_free1_mono.wav','Audio/Words/MT6_three1_mono.wav'];



   //This shows a loading bar with the message "please wait" while the stimuli are preloading
    var preload= {
        type: jsPsychPreload,
        audio: audiolist, 
        show_progress_bar: true,
        message: 'Please wait, experiment files are loading.',
        auto_update_progress_bar: true
    }
    timeline.push(preload);
    

    //This is the starting point of the experiment after all the audio have loaded
    var start = {
      type: jsPsychInstructions,
      pages: ['Please click continue when you are ready to start the experiment.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
    timeline.push(start);



    //creating empty arrays for the timelines for blocks 1, 2, 3, and ingredients for them
    var pretrialstim = []; 

    function whichtarget(wordpair, filename){
       var data = {};
       if(filename.indexOf(wordpair[0]) !== -1){
          data.target=wordpair[0];
          data.distractor=wordpair[1];
        } else if(filename.indexOf(wordpair[1]) !== -1){
              data.target = wordpair[1];
              data.distractor=wordpair[0];
        }
          return data;
        }

        

//creating distractor, target, audio key/value pairs within trialstim
for(var i=0; i<audiolist.length; i++){
    var data = {};
    if(i<12){
      data = whichtarget(['bat','bet'], audiolist[i]);
    } else if(i<24){
      data = whichtarget(['bad','bed'], audiolist[i]);
    }else if(i<36){
      data = whichtarget(['pat','pet'], audiolist[i]);
    }else if(i<48){
      data = whichtarget(['pan','pen'], audiolist[i]);
    }else if(i<60){
      data = whichtarget(['fill','feel'], audiolist[i]);
    }else if(i<72){
      data = whichtarget(['ship','sheep'], audiolist[i]);
    }else if(i<84){
      data = whichtarget(['pill','peel'], audiolist[i]);
    }else if(i<96){
      data = whichtarget(['will','wheel'], audiolist[i]);
    }else if(i<108){
      data = whichtarget(['think','sink'], audiolist[i]);
    }else if(i<120){
      data = whichtarget(['thick','sick'], audiolist[i]);
    }else if(i<132){
      data = whichtarget(['faith','face'], audiolist[i]);
    }else if(i<144){
      data = whichtarget(['mouth','mouse'], audiolist[i]);
    }else if(i<156){
      data = whichtarget(['cake','kick'], audiolist[i]);
    }else if(i<168){
      data = whichtarget(['case','kiss'], audiolist[i]);
    }else if(i<180){
      data = whichtarget(['fate','fit'], audiolist[i]);
    }else if(i<192){
      data = whichtarget(['tape','tip'], audiolist[i]);
    }else if(i<204){
      data = whichtarget(['kite','cat'], audiolist[i]);
    }else if(i<216){
      data = whichtarget(['life','laugh'], audiolist[i]);
    }else if(i<228){
      data = whichtarget(['fight','fat'], audiolist[i]);
    }else if(i<240){
      data = whichtarget(['type','tap'], audiolist[i]);
    }else if(i<252){
      data = whichtarget(['fought','thought'], audiolist[i]);
    }else if(i<264){
      data = whichtarget(['first','thirst'], audiolist[i]);
    }else if(i<276){
      data = whichtarget(['deaf','death'], audiolist[i]);
    }else if(i<288){
      data = whichtarget(['free','three'], audiolist[i]);
    }else {console.log('unexpected index while making block stimuli: ' + i)}
    //stretch goal: data.speaker
    pretrialstim.push({audio: audiolist[i], target:data.target, distractor:data.distractor});
};


//make structured arrays depending on the target word (prep for 'choices')
var wordsbytarget = {};
//var alltargets = ['bet','bat','bed','bad','sheep','ship','fill','feel','mouth','mouse','sink','think',etc.];
wordsbytarget.bat = pretrialstim.filter( function(el) {
  return el.target == 'bat'
});
wordsbytarget.bet = pretrialstim.filter( function(el) {
  return el.target == 'bet'
});
wordsbytarget.bad = pretrialstim.filter( function(el) {
  return el.target == 'bad'
});
wordsbytarget.bed = pretrialstim.filter( function(el) {
  return el.target == 'bed'
});
wordsbytarget.pat = pretrialstim.filter( function(el) {
  return el.target == 'pat'
});
wordsbytarget.pet = pretrialstim.filter( function(el) {
  return el.target == 'pet'
});
wordsbytarget.pan = pretrialstim.filter( function(el) {
  return el.target == 'pan'
});
wordsbytarget.pen = pretrialstim.filter( function(el) {
  return el.target == 'pen'
});
wordsbytarget.fill = pretrialstim.filter( function(el) {
  return el.target == 'fill'
});
wordsbytarget.feel = pretrialstim.filter( function(el) {
  return el.target == 'feel'
});
wordsbytarget.ship = pretrialstim.filter( function(el) {
  return el.target == 'ship'
});
wordsbytarget.sheep = pretrialstim.filter( function(el) {
  return el.target == 'sheep'
});
wordsbytarget.pill = pretrialstim.filter( function(el) {
  return el.target == 'pill'
});
wordsbytarget.peel = pretrialstim.filter( function(el) {
  return el.target == 'peel'
});
wordsbytarget.will = pretrialstim.filter( function(el) {
  return el.target == 'will'
});
wordsbytarget.wheel = pretrialstim.filter( function(el) {
  return el.target == 'wheel'
});
wordsbytarget.think = pretrialstim.filter( function(el) {
  return el.target == 'think'
});
wordsbytarget.sink = pretrialstim.filter( function(el) {
  return el.target == 'sink'
});
wordsbytarget.thick = pretrialstim.filter( function(el) {
  return el.target == 'thick'
});
wordsbytarget.sick = pretrialstim.filter( function(el) {
  return el.target == 'sick'
});
wordsbytarget.faith = pretrialstim.filter( function(el) {
  return el.target == 'faith'
});
wordsbytarget.face = pretrialstim.filter( function(el) {
  return el.target == 'face'
});
wordsbytarget.mouth = pretrialstim.filter( function(el) {
  return el.target == 'mouth'
});
wordsbytarget.mouse = pretrialstim.filter( function(el) {
  return el.target == 'mouse'
});
wordsbytarget.cake = pretrialstim.filter( function(el) {
  return el.target == 'cake'
});
wordsbytarget.kick = pretrialstim.filter( function(el) {
  return el.target == 'kick'
});
wordsbytarget.case = pretrialstim.filter( function(el) {
  return el.target == 'case'
});
wordsbytarget.kiss = pretrialstim.filter( function(el) {
  return el.target == 'kiss'
});
wordsbytarget.fate = pretrialstim.filter( function(el) {
  return el.target == 'fate'
});
wordsbytarget.fit = pretrialstim.filter( function(el) {
  return el.target == 'fit'
});
wordsbytarget.tape = pretrialstim.filter( function(el) {
  return el.target == 'tape'
});
wordsbytarget.tip = pretrialstim.filter( function(el) {
  return el.target == 'tip'
});
wordsbytarget.kite = pretrialstim.filter( function(el) {
  return el.target == 'kite'
});
wordsbytarget.cat = pretrialstim.filter( function(el) {
  return el.target == 'cat'
});
wordsbytarget.life = pretrialstim.filter( function(el) {
  return el.target == 'life'
});
wordsbytarget.laugh = pretrialstim.filter( function(el) {
  return el.target == 'laugh'
});
wordsbytarget.fight = pretrialstim.filter( function(el) {
  return el.target == 'fight'
});
wordsbytarget.fat = pretrialstim.filter( function(el) {
  return el.target == 'fat'
});
wordsbytarget.type = pretrialstim.filter( function(el) {
  return el.target == 'type'
});
wordsbytarget.tap = pretrialstim.filter( function(el) {
  return el.target == 'tap'
});
wordsbytarget.fought = pretrialstim.filter( function(el) {
  return el.target == 'fought'
});
wordsbytarget.thought = pretrialstim.filter( function(el) {
  return el.target == 'thought'
});
wordsbytarget.first = pretrialstim.filter( function(el) {
  return el.target == 'first'
});
wordsbytarget.thirst = pretrialstim.filter( function(el) {
  return el.target == 'thirst'
});
wordsbytarget.deaf = pretrialstim.filter( function(el) {
  return el.target == 'deaf'
});
wordsbytarget.death = pretrialstim.filter( function(el) {
  return el.target == 'death'
});
wordsbytarget.free = pretrialstim.filter( function(el) {
  return el.target == 'free'
});
wordsbytarget.three = pretrialstim.filter( function(el) {
  return el.target == 'three'
});

//final version of trialstim to be populated below
var trialstim = [];
//making it so that half of each word has "target" as the left choice, and half the right.
for(i=0;i<Object.keys(wordsbytarget).length;i++){
  //collect all the objects for the current word (e.g. "bet")
  var thesewords = wordsbytarget[Object.keys(wordsbytarget)[i]];
  //assign which ones will have the target word on the right
  var targetright = jsPsych.randomization.sampleWithoutReplacement(thesewords, 6);
  //find left ones by using remainder function below
  var targetleft = thesewords.filter( function( el ){
      return targetright.indexOf( el ) < 0;
    });
  //create "choices" for targetright and targetleft and push to final version of stim
  for(j=0;j<targetright.length;j++){
    targetright[j].choices = [targetright[j].distractor,targetright[j].target];
    trialstim.push(targetright[j]);
  };
  for(j=0;j<targetleft.length;j++){
    targetleft[j].choices = [targetleft[j].target,targetleft[j].distractor];
    trialstim.push(targetleft[j]);
  };
};




//in case we need to submit some artwork to the Louvre
  //wordsbytarget.bet[i].choices = [wordsbytarget.bet[i].target, wordsbytarget.bet[i].distractor]
  //wordsbytarget[Object.keys(wordsbytarget)[i]].choices = [wordsbytarget[Object.keys(wordsbytarget)[i]].target,wordsbytarget[Object.keys(wordsbytarget)[i]].distractor];

    //timeline variables: Each timeline is separated by block
    var firstblock = {
    timeline: [
        {
            type: jsPsychAudioButtonResponse,
            stimulus: jsPsych.timelineVariable ('audio'),
            trial_duration: null,
            choices: jsPsych.timelineVariable ('choices'),
            prompt: "What word did you hear?",
            response_allowed_while_playing: false,
            button_html: '<button class="jspsych-btn" style=" display: inline-block; padding: 6px 12px; margin: 0px; font-size: 36px; font-weight: 400; font-family: "Open Sans", "Arial", sans-serif; cursor: pointer; line-height: 1.4; text-align: center; white-space: nowrap; vertical-align: middle; background-image: none; border: 1px solid transparent; border-radius: 4px; color: #333; background-color: #fff; border-color: #ccc">%choice%</button>'
        }],
    on_finish: function(data) {
      var choosables = jsPsych.timelineVariable('choices', true);
      var chosenone = choosables[jsPsych.data.getLastTrialData().trials[0].response];
      jsPsych.data.addDataToLastTrial({wordchosen: chosenone});
      jsPsych.data.addDataToLastTrial({correct: jsPsych.timelineVariable('audio', true).includes(chosenone)});
    },
    randomize_order: true,
    timeline_variables: trialstim
};
timeline.push(firstblock)

//This is the first break
var break1 = {
      type: jsPsychInstructions,
      pages: ['Break time! Press continue when you would like to proceed.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
timeline.push(break1);

 //timeline variables: Block 2 audio files
 var secondblock = {
    timeline: [
        {
            type: jsPsychAudioButtonResponse,
            stimulus: jsPsych.timelineVariable ('audio'),
            trial_duration: null,
            choices: jsPsych.timelineVariable ('choices'),
            prompt: "What word did you hear? ",
            response_allowed_while_playing: false,
            button_html: '<button class="jspsych-btn" style=" display: inline-block; padding: 6px 12px; margin: 0px; font-size: 36px; font-weight: 400; font-family: "Open Sans", "Arial", sans-serif; cursor: pointer; line-height: 1.4; text-align: center; white-space: nowrap; vertical-align: middle; background-image: none; border: 1px solid transparent; border-radius: 4px; color: #333; background-color: #fff; border-color: #ccc">%choice%</button>'
        }],
    on_finish: function(data){
      var choosables = jsPsych.timelineVariable('choices', true);
      var chosenone = choosables[jsPsych.data.getLastTrialData().trials[0].response];
      jsPsych.data.addDataToLastTrial({wordchosen: chosenone});
      jsPsych.data.addDataToLastTrial({correct: jsPsych.timelineVariable('audio', true).includes(chosenone)});
    },
    randomize_order: true,
    timeline_variables: trialstim
};
timeline.push(secondblock)

//This is the second break
var break2 = {
      type: jsPsychInstructions,
      pages: ['Break time! Press continue when you would like to proceed.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
timeline.push(break2)

 //timeline variables: Block 3 audio files
 var thirdblock = {
    timeline: [
        {
            type: jsPsychAudioButtonResponse,
            stimulus: jsPsych.timelineVariable ('audio'),
            trial_duration: null,
            choices: jsPsych.timelineVariable ('choices'),
            prompt: "What word did you hear? ",
            response_allowed_while_playing: false,
            button_html: '<button class="jspsych-btn" style=" display: inline-block; padding: 6px 12px; margin: 0px; font-size: 36px; font-weight: 400; font-family: "Open Sans", "Arial", sans-serif; cursor: pointer; line-height: 1.4; text-align: center; white-space: nowrap; vertical-align: middle; background-image: none; border: 1px solid transparent; border-radius: 4px; color: #333; background-color: #fff; border-color: #ccc">%choice%</button>'
        }],
    on_finish: function(data){
      var choosables = jsPsych.timelineVariable('choices', true);
      var chosenone = choosables[jsPsych.data.getLastTrialData().trials[0].response];
      jsPsych.data.addDataToLastTrial({wordchosen: chosenone});
      jsPsych.data.addDataToLastTrial({correct: jsPsych.timelineVariable('audio', true).includes(chosenone)});
    },
    randomize_order: true,
    timeline_variables: trialstim
};
timeline.push(thirdblock)

//This is the third break
var break3 = {
      type: jsPsychInstructions,
      pages: ['Break time! Press continue when you would like to proceed.'
    ],
    button_label_next: "Continue",
    show_clickable_nav: true,
    allow_backward:false,
    };
timeline.push(break3)

//timeline variables: Block 4 audio files
 var fourthblock = {
    timeline: [
        {
            type: jsPsychAudioButtonResponse,
            stimulus: jsPsych.timelineVariable ('audio'),
            trial_duration: null,
            choices: jsPsych.timelineVariable ('choices'),
            prompt: "What word did you hear? ",
            response_allowed_while_playing: false,
            button_html: '<button class="jspsych-btn" style=" display: inline-block; padding: 6px 12px; margin: 0px; font-size: 36px; font-weight: 400; font-family: "Open Sans", "Arial", sans-serif; cursor: pointer; line-height: 1.4; text-align: center; white-space: nowrap; vertical-align: middle; background-image: none; border: 1px solid transparent; border-radius: 4px; color: #333; background-color: #fff; border-color: #ccc">%choice%</button>'
        }],
    on_finish: function(data){
      var choosables = jsPsych.timelineVariable('choices', true);
      var chosenone = choosables[jsPsych.data.getLastTrialData().trials[0].response];
      jsPsych.data.addDataToLastTrial({wordchosen: chosenone});
      jsPsych.data.addDataToLastTrial({correct: jsPsych.timelineVariable('audio', true).includes(chosenone)});
    },
    randomize_order: true,
    timeline_variables: trialstim
};
timeline.push(fourthblock)



//End of main part, introducing survey
var instructions1 = {
        type: jsPsychInstructions,
         pages: ['Thank you for completing the main parts of the experiment! The next part will be a quick 5 minute survey, and then you will have completed the entire experiment.'
     ],
         button_label_next: "Continue",
         show_clickable_nav: true,
        allow_backward:false,
        };
    timeline.push(instructions1);

 
// adding identifying questions
   var survey = {
        type: jsPsychSurveyText,
        questions: [
          {prompt: '  Please enter your Prolific ID: ', placeholder: 'Prolific ID', required: true, rows: 1, 
          name: "Prolific ID"},
          {prompt: 'Please enter your age ', placeholder: 'enter age', required: true, rows: 1,
          name: "Age"},
          {prompt: 'Please enter your sex ', placeholder: 'enter sex', required: true, rows: 1,
          name: "Sex"},
          {prompt: 'Please enter your gender ', placeholder: 'enter gender', required: true, rows: 1,
          name: "Gender"},
        ]
     };
     timeline.push(survey) 


 //adding in language questions
 var survey1 = {
     type: jsPsychSurveyHtmlForm,
      preamble: '<p>1.	Please list all of the languages that you speak below. Based on the provided scale, input your proficiency and age you began to  learn each language. Please also specify which variety of Canadian English is your first language (West,Ontario,Quebec,Maritimes,Newfoundland).</p>',
       html: '<p style="text-align:centre"> First Language <input name="first" type="text" placeholder="English, etc." required=true />, <select name="proficiency1"> <option value="native">native</option> <option value="proficient">proficient</option> <option value="intermediate">intermediate</option> <option value="beginner">beginner</option></select>, <select name="Variety of Canadian English"> <option value="West(B.C.,Alberta,Saskatchewan,Manitoba)">West(B.C.,Alberta,Saskatchewan,Manitoba)</option> <option value="Ontario">Ontario</option> <option value="Quebec">Quebec</option> <option value="Newfoundland">Newfoundland</option> <option value="Maritimes(PEI,NS,NB)">Maritimes(PEI,NS,NB)</option></select>,Age began <input name="Age began" type="text" /></p>'+
       '<p style="text-align:centre"> Second Language <input name="second" type="text" />, <input name="Age began" type="text" />, <select name="proficiency2"> <option value="native">native</option> <option value="proficient">proficient</option> <option value="intermediate">intermediate</option> <option value="beginner">beginner</option></select>, Age began <input name="Age began" type="text" /></p>'+
       '<p style="text-align:centre"> Third Language <input name="third" type="text" />, <input name="Age began" type="text" />, <select name="proficiency3"> <option value="native">native</option> <option value="proficient">proficient</option> <option value="intermediate">intermediate</option> <option value="beginner">beginner</option></select>, Age began <input name="Age began" type="text" /></p>',

       name: "Languages Spoken"
};
timeline.push(survey1);

var survey2 = {
     type: jsPsychSurveyHtmlForm,
      preamble: '<p>2.  What are your parents native language(s)? </p>',
       html: '<p style="text-align:centre"> Parent 1 <input name="Parent 1" type="text" placeholder="languages" required=true /></p>'+
       '<p style="text-align:centre"> Parent 2 <input name="Parent 2" type="text" placeholder="languages" required=true /></p>',

       name: "parents languages"
};
timeline.push(survey2);



    //Survey: medium of exposure to accented English
    var survey = {
        type: jsPsychSurveyText,
        questions: [
          {prompt: '3.  List any accented English (non-native accents) that you are familiar with, from the most familiar one to the least familiar one (e.g. 1st-Mandarin accented English, 2nd-French accented English, etc. If you are not familiar with any accented English, put N/A below): ', placeholder: 'enter accented English here separated by a comma (e.g. 1st-Mandarin accented English, 2nd-French accented English,...Max 250 char.)', required: true, rows: 2, 
          name: "accent Exposure"},
          {prompt: '4.  What is the medium of exposure to each of the accented English (non-native accents) ? Please list the accented English and the respective medium of exposure here (e.g. Mandarin-accented English:parents, French-accented English:friends. If you are not familiar with any accented English, put N/A below): ', placeholder: 'enter accents and medium of exposure here separated by a comma (eg. Mandarin-accented English:parents, French-accented English:friends,... Max 250 char.),', required: true, rows: 2,
          name: "Medium of Exposure"},
          {prompt: '5.  How many hours are you exposed to each of the accented English (non-native accents) in a week (please self-estimate)? Please list the accented English and the respective weekly hours of exposure here (e.g. Mandarin-accented English:21 hours, French-accented English:14 hours, etc. If you are not familiar with any accented English, put N/A below): ', placeholder: 'enter accents and hours of exposure here separated by a comma (e.g. Mandarin-accented English:21 hours, French-accented English:14 hours,... Max 250 char.),', required: true, rows: 2,
          name: "time of Exposure"},
        ]
     };
     timeline.push(survey)

    

    //Ending message
    var Goodbye = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "Thank you for your participation. Please press any button on the keyboard to move to the last page and then close the window.",
    };
    timeline.push(Goodbye)

jatos.onLoad(() => {
  jsPsych.run(timeline)
});
  </script>
  </html>
